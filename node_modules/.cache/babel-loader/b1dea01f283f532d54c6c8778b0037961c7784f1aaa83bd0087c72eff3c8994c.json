{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ram\\\\Desktop\\\\React\\\\Projects\\\\React_shoping_cart\\\\src\\\\Shoping_cart\\\\Product\\\\Order.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductDetail = () => {\n  _s();\n  const {\n    id,\n    quantity\n  } = useParams();\n  const [product, setProduct] = useState(null);\n  const navigate = useNavigate();\n  const fetchProductDetails = async (id, token, quantity) => {\n    const url = `https://ram.freelogomaker.in/api/buynow/${id}`;\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id,\n          quantity\n        }) // Ensure you're sending both id and quantity\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to place the order\");\n      }\n      return await response.json();\n    } catch (error) {\n      throw new Error(error.message);\n    }\n  };\n  useEffect(() => {\n    const loadProduct = async () => {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        Swal.fire({\n          title: \"Unauthorized\",\n          text: \"You must be logged in to place an order.\",\n          icon: \"error\"\n        });\n        return;\n      }\n      try {\n        const productData = await fetchProductDetails(id, token, quantity);\n        setProduct(productData);\n        if (productData.success) {\n          Swal.fire({\n            title: \"Order Successful\",\n            text: productData.message,\n            icon: \"success\"\n          });\n          // Redirect back to the previous page after successful order\n          navigate(-1); // Go back to the previous page\n        } else {\n          Swal.fire({\n            title: \"Order Failed\",\n            text: productData.message || \"There was an issue placing your order.\",\n            icon: \"error\"\n          });\n        }\n      } catch (error) {\n        Swal.fire({\n          title: \"Error\",\n          text: error.message,\n          icon: \"error\"\n        });\n      }\n    };\n    loadProduct();\n  }, [id, quantity, navigate]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid py-5\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n};\n_s(ProductDetail, \"eNEMBgExRYGRHyrUe33W8ECaTg8=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ProductDetail;\nexport default ProductDetail;\nvar _c;\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","Swal","jsxDEV","_jsxDEV","ProductDetail","_s","id","quantity","product","setProduct","navigate","fetchProductDetails","token","url","response","fetch","method","headers","body","JSON","stringify","ok","Error","json","error","message","loadProduct","localStorage","getItem","fire","title","text","icon","productData","success","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Ram/Desktop/React/Projects/React_shoping_cart/src/Shoping_cart/Product/Order.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst ProductDetail = () => {\r\n    const { id, quantity } = useParams();\r\n    const [product, setProduct] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    const fetchProductDetails = async (id, token, quantity) => {\r\n        const url = `https://ram.freelogomaker.in/api/buynow/${id}`;\r\n\r\n        try {\r\n            const response = await fetch(url, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ id, quantity }), // Ensure you're sending both id and quantity\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(\"Failed to place the order\");\r\n            }\r\n\r\n            return await response.json();\r\n        } catch (error) {\r\n            throw new Error(error.message);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const loadProduct = async () => {\r\n            const token = localStorage.getItem('token');\r\n            if (!token) {\r\n                Swal.fire({\r\n                    title: \"Unauthorized\",\r\n                    text: \"You must be logged in to place an order.\",\r\n                    icon: \"error\",\r\n                });\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const productData = await fetchProductDetails(id, token, quantity);\r\n                setProduct(productData);\r\n\r\n                if (productData.success) {\r\n                    Swal.fire({\r\n                        title: \"Order Successful\",\r\n                        text: productData.message,\r\n                        icon: \"success\",\r\n                    });\r\n                    // Redirect back to the previous page after successful order\r\n                    navigate(-1); // Go back to the previous page\r\n                } else {\r\n                    Swal.fire({\r\n                        title: \"Order Failed\",\r\n                        text: productData.message || \"There was an issue placing your order.\",\r\n                        icon: \"error\",\r\n                    });\r\n                }\r\n            } catch (error) {\r\n                Swal.fire({\r\n                    title: \"Error\",\r\n                    text: error.message,\r\n                    icon: \"error\",\r\n                });\r\n            }\r\n        };\r\n\r\n        loadProduct();\r\n    }, [id, quantity, navigate]);\r\n\r\n    return (\r\n        <div className=\"container-fluid py-5\">\r\n            {/* Add meaningful content or redirect handling */}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}