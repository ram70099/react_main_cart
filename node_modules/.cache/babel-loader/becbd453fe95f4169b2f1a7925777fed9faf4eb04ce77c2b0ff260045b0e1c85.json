{"ast":null,"code":"import React,{useState}from\"react\";import{removeCartItem}from\"../Fetch/Cancel\";import{Link}from'react-router-dom';import Swal from\"sweetalert2\";import useCartData from\"../Fetch/Order\";// Fixed import\nimport\"../css/CartModal.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CartModal(_ref){let{isOpen,onClose}=_ref;const{cartItems,loading,error}=useCartData(isOpen);// Fixed hook usage\nconst[removing,setRemoving]=useState(false);// State to track removal process\nconst handleRemoveItem=async itemId=>{setRemoving(true);try{const result=await removeCartItem(itemId);if(result.success){Swal.fire({icon:\"success\",title:\"Removed!\",text:\"Item has been removed from your cart.\",timer:1500,showConfirmButton:false}).then(()=>{window.location.reload();});}else{throw new Error(\"Failed to remove item.\");}}catch(err){Swal.fire({icon:\"error\",title:\"Error!\",text:err.message||\"Failed to remove item. Please try again.\"});}setRemoving(false);};const calculateTotal=()=>{return cartItems.reduce((sum,item)=>{const itemPrice=parseFloat(item.price)||0;const itemQuantity=item.quantity||1;return sum+itemPrice*itemQuantity;},0);};return/*#__PURE__*/_jsx(\"div\",{className:`modal-overlay ${isOpen?\"show\":\"\"}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ordered Items\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:onClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-items\",children:[loading?/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Loading...\"}):error?/*#__PURE__*/_jsx(\"p\",{className:\"error-text\",children:error}):cartItems.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"empty-cart\",children:\"No ordered items to display!\"}):cartItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(Link,{to:`/product/${item.id}`,children:/*#__PURE__*/_jsx(\"img\",{src:item.pimage,alt:item.pname,className:\"item-image\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:item.pname}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-price\",children:[\"$\",((parseFloat(item.price)||0)*(item.quantity||1)).toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-quantity\",children:[\"Quantity: \",item.quantity||1]})]}),/*#__PURE__*/_jsx(Link,{to:`/product/${item.id}`,children:\"Product Detial\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleRemoveItem(item.id),className:\"remove-button\",disabled:removing,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"}),\" \",removing?\"Removing...\":\"Cancel Item\"]})]},item.id)),cartItems.length>0&&!loading&&!error&&/*#__PURE__*/_jsx(\"div\",{className:\"cart-summary\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"subtotal\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Total (\",cartItems.reduce((sum,item)=>sum+(item.quantity||1),0),\" items):\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"total-price\",children:[\"$\",calculateTotal().toFixed(2)]})]})})]})]})});}export default CartModal;","map":{"version":3,"names":["React","useState","removeCartItem","Link","Swal","useCartData","jsx","_jsx","jsxs","_jsxs","CartModal","_ref","isOpen","onClose","cartItems","loading","error","removing","setRemoving","handleRemoveItem","itemId","result","success","fire","icon","title","text","timer","showConfirmButton","then","window","location","reload","Error","err","message","calculateTotal","reduce","sum","item","itemPrice","parseFloat","price","itemQuantity","quantity","className","children","onClick","length","map","to","id","src","pimage","alt","pname","toFixed","disabled"],"sources":["C:/Users/Ram/Desktop/React/Projects/React_shoping_cart/src/Shoping_cart/Cart/Order.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { removeCartItem } from \"../Fetch/Cancel\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Swal from \"sweetalert2\";\r\nimport useCartData from \"../Fetch/Order\"; // Fixed import\r\n\r\nimport \"../css/CartModal.css\";\r\n\r\nfunction CartModal({ isOpen, onClose }) {\r\n  const { cartItems, loading, error } = useCartData(isOpen); // Fixed hook usage\r\n  const [removing, setRemoving] = useState(false); // State to track removal process\r\n\r\n  const handleRemoveItem = async (itemId) => {\r\n    setRemoving(true);\r\n    try {\r\n      const result = await removeCartItem(itemId);\r\n      if (result.success) {\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Removed!\",\r\n          text: \"Item has been removed from your cart.\",\r\n          timer: 1500,\r\n          showConfirmButton: false,\r\n        }).then(() => {\r\n          window.location.reload();\r\n        })\r\n      } else {\r\n        throw new Error(\"Failed to remove item.\");\r\n      }\r\n    } catch (err) {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Error!\",\r\n        text: err.message || \"Failed to remove item. Please try again.\",\r\n      });\r\n    }\r\n    setRemoving(false);\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    return cartItems.reduce((sum, item) => {\r\n      const itemPrice = parseFloat(item.price) || 0;\r\n      const itemQuantity = item.quantity || 1;\r\n      return sum + itemPrice * itemQuantity;\r\n    }, 0);\r\n  };\r\n\r\n  return (\r\n    <div className={`modal-overlay ${isOpen ? \"show\" : \"\"}`}>\r\n      <div className=\"modal-content\">\r\n        <div className=\"modal-header\">\r\n          <h2>Ordered Items</h2>\r\n          <button className=\"close-button\" onClick={onClose}>\r\n            Ã—\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"cart-items\">\r\n          {loading ? (\r\n            <p className=\"loading-text\">Loading...</p>\r\n          ) : error ? (\r\n            <p className=\"error-text\">{error}</p>\r\n          ) : cartItems.length === 0 ? (\r\n            <p className=\"empty-cart\">No ordered items to display!</p>\r\n          ) : (\r\n            cartItems.map((item) => (\r\n              <div key={item.id} className=\"cart-item\">\r\n                <Link to={`/product/${item.id}`}>\r\n                  <img src={item.pimage} alt={item.pname} className=\"item-image\" />\r\n                </Link>\r\n                <div className=\"item-details\">\r\n                  <h3>{item.pname}</h3>\r\n                  <p className=\"item-price\">\r\n                    ${((parseFloat(item.price) || 0) * (item.quantity || 1)).toFixed(2)}\r\n                  </p>\r\n                  <p className=\"item-quantity\">Quantity: {item.quantity || 1}</p>\r\n                </div>\r\n                <Link to={`/product/${item.id}`}>\r\n\r\n                  Product Detial\r\n                </Link>\r\n                <button\r\n                  onClick={() => handleRemoveItem(item.id)}\r\n                  className=\"remove-button\"\r\n                  disabled={removing}\r\n                >\r\n                  <i className=\"fas fa-trash-alt\"></i> {removing ? \"Removing...\" : \"Cancel Item\"}\r\n                </button>\r\n\r\n\r\n              </div>\r\n            ))\r\n          )}\r\n\r\n          {cartItems.length > 0 && !loading && !error && (\r\n            <div className=\"cart-summary\">\r\n              <div className=\"subtotal\">\r\n                <span>\r\n                  Total ({cartItems.reduce((sum, item) => sum + (item.quantity || 1), 0)} items):\r\n                </span>\r\n                <span className=\"total-price\">${calculateTotal().toFixed(2)}</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CartModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}