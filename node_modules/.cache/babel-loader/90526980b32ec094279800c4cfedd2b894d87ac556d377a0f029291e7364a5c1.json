{"ast":null,"code":"import React,{useState}from\"react\";import{Navigate}from\"react-router-dom\";import Swal from\"sweetalert2\";import axios from\"axios\";import{GoogleLogin}from\"@react-oauth/google\";import FacebookLogin from\"react-facebook-login\";// Import FacebookLogin\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Login=()=>{const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[login,setLogin]=useState(false);const[load,setLoading]=useState(false);const submit=async evt=>{evt.preventDefault();const loginData={email,password};try{setLoading(true);const response=await fetch(\"https://ram.freelogomaker.in/api/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\",body:JSON.stringify(loginData)});const resData=await response.json();if(resData.success){setLogin(true);localStorage.setItem(\"token\",resData.token);}else{Swal.fire({title:\"Login Failed\",text:resData.message||\"Invalid credentials.\",icon:\"error\"}).then(()=>{window.location.href=\"/login\";});}}catch(error){console.error(\"Error during login:\",error);Swal.fire({title:\"Login Failed\",text:\"Something went wrong. Please try again.\",icon:\"error\"});}setLoading(false);};const handleGoogleSuccess=async response=>{const token=response.credential;try{const res=await axios.post(\"https://ram.freelogomaker.in/api/google/callback\",{token},{withCredentials:true});if(res.data.success){setLogin(true);localStorage.setItem(\"token\",res.data.token);}else{Swal.fire({title:\"Login Failed\",text:res.data.message||\"Google login failed.\",icon:\"error\"});}}catch(error){console.error(\"Google Login Error:\",error);Swal.fire({title:\"Login Failed\",text:\"Something went wrong. Please try again.\",icon:\"error\"});}};const handleFacebookResponse=async response=>{const{accessToken}=response;// Get the access token from Facebook's response\ntry{const res=await axios.post(\"https://ram.freelogomaker.in/api/facebook/callback\",{token:accessToken},{withCredentials:true// Ensure cookies are sent with the request\n});if(res.data.success){setLogin(true);localStorage.setItem(\"token\",res.data.token);}else{Swal.fire({title:\"Login Failed\",text:res.data.message||\"Facebook login failed.\",icon:\"error\"});}}catch(error){console.error(\"Facebook Login Error:\",error);Swal.fire({title:\"Login Failed\",text:\"Something went wrong. Please try again.\",icon:\"error\"});}};return/*#__PURE__*/_jsx(_Fragment,{children:login?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main_div\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Login Form\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input_box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",onChange:e=>setEmail(e.target.value),id:\"email\",placeholder:\"Enter your email\",required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input_box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",onChange:e=>setPassword(e.target.value),id:\"password\",placeholder:\"Enter your password\",required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lock\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"option_div\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"check_box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Remember me\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"forget_div\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"Forgot password?\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"input_box button\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:load?\"Loading...\":\"Login\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"sign_up\",children:[\"Not a member? \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"Signup now\"})]})]})]})})});};export default Login;","map":{"version":3,"names":["React","useState","Navigate","Swal","axios","GoogleLogin","FacebookLogin","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","email","setEmail","password","setPassword","login","setLogin","load","setLoading","submit","evt","preventDefault","loginData","response","fetch","method","headers","credentials","body","JSON","stringify","resData","json","success","localStorage","setItem","token","fire","title","text","message","icon","then","window","location","href","error","console","handleGoogleSuccess","credential","res","post","withCredentials","data","handleFacebookResponse","accessToken","children","to","className","onSubmit","type","onChange","e","target","value","id","placeholder","required"],"sources":["C:/Users/Ram/Desktop/React/Projects/React_shoping_cart/src/Shoping_cart/Login/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\nimport axios from \"axios\";\r\nimport { GoogleLogin } from \"@react-oauth/google\";\r\nimport FacebookLogin from \"react-facebook-login\"; // Import FacebookLogin\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [login, setLogin] = useState(false);\r\n  const [load, setLoading] = useState(false);\r\n\r\n  const submit = async (evt) => {\r\n    evt.preventDefault();\r\n    const loginData = { email, password };\r\n\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(\"https://ram.freelogomaker.in/api/login\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        credentials: \"include\",\r\n        body: JSON.stringify(loginData),\r\n      });\r\n      const resData = await response.json();\r\n      if (resData.success) {\r\n        setLogin(true);\r\n        localStorage.setItem(\"token\", resData.token);\r\n      } else {\r\n        Swal.fire({\r\n          title: \"Login Failed\",\r\n          text: resData.message || \"Invalid credentials.\",\r\n          icon: \"error\",\r\n        }).then(() => {\r\n          window.location.href = \"/login\";\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error during login:\", error);\r\n      Swal.fire({\r\n        title: \"Login Failed\",\r\n        text: \"Something went wrong. Please try again.\",\r\n        icon: \"error\",\r\n      });\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleGoogleSuccess = async (response) => {\r\n    const token = response.credential;\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        \"https://ram.freelogomaker.in/api/google/callback\",\r\n        { token },\r\n        {\r\n          withCredentials: true,\r\n        }\r\n      );\r\n\r\n      if (res.data.success) {\r\n        setLogin(true);\r\n        localStorage.setItem(\"token\", res.data.token);\r\n      } else {\r\n        Swal.fire({\r\n          title: \"Login Failed\",\r\n          text: res.data.message || \"Google login failed.\",\r\n          icon: \"error\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Google Login Error:\", error);\r\n      Swal.fire({\r\n        title: \"Login Failed\",\r\n        text: \"Something went wrong. Please try again.\",\r\n        icon: \"error\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleFacebookResponse = async (response) => {\r\n    const { accessToken } = response; // Get the access token from Facebook's response\r\n\r\n    try {\r\n        const res = await axios.post(\r\n            \"https://ram.freelogomaker.in/api/facebook/callback\",\r\n            { token: accessToken },\r\n            {\r\n                withCredentials: true,  // Ensure cookies are sent with the request\r\n            }\r\n        );\r\n\r\n        if (res.data.success) {\r\n            setLogin(true);\r\n            localStorage.setItem(\"token\", res.data.token);\r\n        } else {\r\n            Swal.fire({\r\n                title: \"Login Failed\",\r\n                text: res.data.message || \"Facebook login failed.\",\r\n                icon: \"error\",\r\n            });\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Facebook Login Error:\", error);\r\n        Swal.fire({\r\n            title: \"Login Failed\",\r\n            text: \"Something went wrong. Please try again.\",\r\n            icon: \"error\",\r\n        });\r\n    }\r\n};\r\n\r\n\r\n  return (\r\n    <>\r\n      {login ? (\r\n        <Navigate to=\"/\" />\r\n      ) : (\r\n        <div className=\"container\">\r\n          <div className=\"main_div\">\r\n            <div className=\"title\">Login Form</div>\r\n            <form onSubmit={submit}>\r\n              <div className=\"input_box\">\r\n                <input\r\n                  type=\"email\"\r\n                  className=\"form-control\"\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  id=\"email\"\r\n                  placeholder=\"Enter your email\"\r\n                  required\r\n                />\r\n                <div className=\"icon\">\r\n                  <i className=\"fas fa-user\"></i>\r\n                </div>\r\n              </div>\r\n              <div className=\"input_box\">\r\n                <input\r\n                  type=\"password\"\r\n                  className=\"form-control\"\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  id=\"password\"\r\n                  placeholder=\"Enter your password\"\r\n                  required\r\n                />\r\n                <div className=\"icon\">\r\n                  <i className=\"fas fa-lock\"></i>\r\n                </div>\r\n              </div>\r\n              <div className=\"option_div\">\r\n                <div className=\"check_box\">\r\n                  <input type=\"checkbox\" />\r\n                  <span>Remember me</span>\r\n                </div>\r\n                <div className=\"forget_div\">\r\n                  <a href=\"#\">Forgot password?</a>\r\n                </div>\r\n              </div>\r\n              <div className=\"input_box button\">\r\n                <input type=\"submit\" value={load ? \"Loading...\" : \"Login\"} />\r\n              </div>\r\n              <div className=\"sign_up\">\r\n                Not a member? <a href=\"/register\">Signup now</a>\r\n              </div>\r\n            </form>\r\n\r\n          \r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,MAAO,CAAAC,IAAI,KAAM,aAAa,CAC9B,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,qBAAqB,CACjD,MAAO,CAAAC,aAAa,KAAM,sBAAsB,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAElD,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CACzC,KAAM,CAACmB,IAAI,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAE1C,KAAM,CAAAqB,MAAM,CAAG,KAAO,CAAAC,GAAG,EAAK,CAC5BA,GAAG,CAACC,cAAc,CAAC,CAAC,CACpB,KAAM,CAAAC,SAAS,CAAG,CAAEX,KAAK,CAAEE,QAAS,CAAC,CAErC,GAAI,CACFK,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,wCAAwC,CAAE,CACrEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,WAAW,CAAE,SAAS,CACtBC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACR,SAAS,CAChC,CAAC,CAAC,CACF,KAAM,CAAAS,OAAO,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CACrC,GAAID,OAAO,CAACE,OAAO,CAAE,CACnBjB,QAAQ,CAAC,IAAI,CAAC,CACdkB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEJ,OAAO,CAACK,KAAK,CAAC,CAC9C,CAAC,IAAM,CACLpC,IAAI,CAACqC,IAAI,CAAC,CACRC,KAAK,CAAE,cAAc,CACrBC,IAAI,CAAER,OAAO,CAACS,OAAO,EAAI,sBAAsB,CAC/CC,IAAI,CAAE,OACR,CAAC,CAAC,CAACC,IAAI,CAAC,IAAM,CACZC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CAAC,CAAC,CACJ,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3C9C,IAAI,CAACqC,IAAI,CAAC,CACRC,KAAK,CAAE,cAAc,CACrBC,IAAI,CAAE,yCAAyC,CAC/CE,IAAI,CAAE,OACR,CAAC,CAAC,CACJ,CACAvB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED,KAAM,CAAA8B,mBAAmB,CAAG,KAAO,CAAAzB,QAAQ,EAAK,CAC9C,KAAM,CAAAa,KAAK,CAAGb,QAAQ,CAAC0B,UAAU,CAEjC,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAjD,KAAK,CAACkD,IAAI,CAC1B,kDAAkD,CAClD,CAAEf,KAAM,CAAC,CACT,CACEgB,eAAe,CAAE,IACnB,CACF,CAAC,CAED,GAAIF,GAAG,CAACG,IAAI,CAACpB,OAAO,CAAE,CACpBjB,QAAQ,CAAC,IAAI,CAAC,CACdkB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEe,GAAG,CAACG,IAAI,CAACjB,KAAK,CAAC,CAC/C,CAAC,IAAM,CACLpC,IAAI,CAACqC,IAAI,CAAC,CACRC,KAAK,CAAE,cAAc,CACrBC,IAAI,CAAEW,GAAG,CAACG,IAAI,CAACb,OAAO,EAAI,sBAAsB,CAChDC,IAAI,CAAE,OACR,CAAC,CAAC,CACJ,CACF,CAAE,MAAOK,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3C9C,IAAI,CAACqC,IAAI,CAAC,CACRC,KAAK,CAAE,cAAc,CACrBC,IAAI,CAAE,yCAAyC,CAC/CE,IAAI,CAAE,OACR,CAAC,CAAC,CACJ,CACF,CAAC,CAED,KAAM,CAAAa,sBAAsB,CAAG,KAAO,CAAA/B,QAAQ,EAAK,CACjD,KAAM,CAAEgC,WAAY,CAAC,CAAGhC,QAAQ,CAAE;AAElC,GAAI,CACA,KAAM,CAAA2B,GAAG,CAAG,KAAM,CAAAjD,KAAK,CAACkD,IAAI,CACxB,oDAAoD,CACpD,CAAEf,KAAK,CAAEmB,WAAY,CAAC,CACtB,CACIH,eAAe,CAAE,IAAO;AAC5B,CACJ,CAAC,CAED,GAAIF,GAAG,CAACG,IAAI,CAACpB,OAAO,CAAE,CAClBjB,QAAQ,CAAC,IAAI,CAAC,CACdkB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEe,GAAG,CAACG,IAAI,CAACjB,KAAK,CAAC,CACjD,CAAC,IAAM,CACHpC,IAAI,CAACqC,IAAI,CAAC,CACNC,KAAK,CAAE,cAAc,CACrBC,IAAI,CAAEW,GAAG,CAACG,IAAI,CAACb,OAAO,EAAI,wBAAwB,CAClDC,IAAI,CAAE,OACV,CAAC,CAAC,CACN,CACJ,CAAE,MAAOK,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7C9C,IAAI,CAACqC,IAAI,CAAC,CACNC,KAAK,CAAE,cAAc,CACrBC,IAAI,CAAE,yCAAyC,CAC/CE,IAAI,CAAE,OACV,CAAC,CAAC,CACN,CACJ,CAAC,CAGC,mBACEpC,IAAA,CAAAI,SAAA,EAAA+C,QAAA,CACGzC,KAAK,cACJV,IAAA,CAACN,QAAQ,EAAC0D,EAAE,CAAC,GAAG,CAAE,CAAC,cAEnBpD,IAAA,QAAKqD,SAAS,CAAC,WAAW,CAAAF,QAAA,cACxBjD,KAAA,QAAKmD,SAAS,CAAC,UAAU,CAAAF,QAAA,eACvBnD,IAAA,QAAKqD,SAAS,CAAC,OAAO,CAAAF,QAAA,CAAC,YAAU,CAAK,CAAC,cACvCjD,KAAA,SAAMoD,QAAQ,CAAExC,MAAO,CAAAqC,QAAA,eACrBjD,KAAA,QAAKmD,SAAS,CAAC,WAAW,CAAAF,QAAA,eACxBnD,IAAA,UACEuD,IAAI,CAAC,OAAO,CACZF,SAAS,CAAC,cAAc,CACxBG,QAAQ,CAAGC,CAAC,EAAKlD,QAAQ,CAACkD,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE,CAC1CC,EAAE,CAAC,OAAO,CACVC,WAAW,CAAC,kBAAkB,CAC9BC,QAAQ,MACT,CAAC,cACF9D,IAAA,QAAKqD,SAAS,CAAC,MAAM,CAAAF,QAAA,cACnBnD,IAAA,MAAGqD,SAAS,CAAC,aAAa,CAAI,CAAC,CAC5B,CAAC,EACH,CAAC,cACNnD,KAAA,QAAKmD,SAAS,CAAC,WAAW,CAAAF,QAAA,eACxBnD,IAAA,UACEuD,IAAI,CAAC,UAAU,CACfF,SAAS,CAAC,cAAc,CACxBG,QAAQ,CAAGC,CAAC,EAAKhD,WAAW,CAACgD,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE,CAC7CC,EAAE,CAAC,UAAU,CACbC,WAAW,CAAC,qBAAqB,CACjCC,QAAQ,MACT,CAAC,cACF9D,IAAA,QAAKqD,SAAS,CAAC,MAAM,CAAAF,QAAA,cACnBnD,IAAA,MAAGqD,SAAS,CAAC,aAAa,CAAI,CAAC,CAC5B,CAAC,EACH,CAAC,cACNnD,KAAA,QAAKmD,SAAS,CAAC,YAAY,CAAAF,QAAA,eACzBjD,KAAA,QAAKmD,SAAS,CAAC,WAAW,CAAAF,QAAA,eACxBnD,IAAA,UAAOuD,IAAI,CAAC,UAAU,CAAE,CAAC,cACzBvD,IAAA,SAAAmD,QAAA,CAAM,aAAW,CAAM,CAAC,EACrB,CAAC,cACNnD,IAAA,QAAKqD,SAAS,CAAC,YAAY,CAAAF,QAAA,cACzBnD,IAAA,MAAGwC,IAAI,CAAC,GAAG,CAAAW,QAAA,CAAC,kBAAgB,CAAG,CAAC,CAC7B,CAAC,EACH,CAAC,cACNnD,IAAA,QAAKqD,SAAS,CAAC,kBAAkB,CAAAF,QAAA,cAC/BnD,IAAA,UAAOuD,IAAI,CAAC,QAAQ,CAACI,KAAK,CAAE/C,IAAI,CAAG,YAAY,CAAG,OAAQ,CAAE,CAAC,CAC1D,CAAC,cACNV,KAAA,QAAKmD,SAAS,CAAC,SAAS,CAAAF,QAAA,EAAC,gBACT,cAAAnD,IAAA,MAAGwC,IAAI,CAAC,WAAW,CAAAW,QAAA,CAAC,YAAU,CAAG,CAAC,EAC7C,CAAC,EACF,CAAC,EAGJ,CAAC,CACH,CACN,CACD,CAAC,CAEP,CAAC,CAED,cAAe,CAAA9C,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}