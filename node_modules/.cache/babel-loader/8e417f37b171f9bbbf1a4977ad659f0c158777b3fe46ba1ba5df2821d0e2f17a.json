{"ast":null,"code":"// src/hooks/useCartData.js\nimport{useState,useEffect}from'react';import axios from'axios';const useCartData=isOpen=>{const[cartItems,setCartItems]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchCartData=async()=>{try{var _response$data,_response$data2;const token=localStorage.getItem(\"token\");if(!token){throw new Error(\"User is not logged in.\");}const response=await axios.get(\"https://ram.freelogomaker.in/api/cart\",{headers:{Authorization:`Bearer ${token}`}});const cartData=((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.cart)||[];const cartProducts=((_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.cartproduct)||[];const mergedCartItems=cartData.map(cartItem=>{const product=cartProducts.find(product=>product.id===cartItem.product_id);return product?{...cartItem,...product}:null;}).filter(Boolean);setCartItems(mergedCartItems);setLoading(false);}catch(error){setError(error.message);setLoading(false);}};if(isOpen){fetchCartData();}},[isOpen]);return{cartItems,loading,error};};export default useCartData;","map":{"version":3,"names":["useState","useEffect","axios","useCartData","isOpen","cartItems","setCartItems","loading","setLoading","error","setError","fetchCartData","_response$data","_response$data2","token","localStorage","getItem","Error","response","get","headers","Authorization","cartData","data","cart","cartProducts","cartproduct","mergedCartItems","map","cartItem","product","find","id","product_id","filter","Boolean","message"],"sources":["C:/Users/Ram/Desktop/React/Projects/React_shoping_cart/src/Shoping_cart/Fetch/Carts.js"],"sourcesContent":["// src/hooks/useCartData.js\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst useCartData = (isOpen) => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchCartData = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n\r\n        if (!token) {\r\n          throw new Error(\"User is not logged in.\");\r\n        }\r\n\r\n        const response = await axios.get(\"https://ram.freelogomaker.in/api/cart\", {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        const cartData = response.data?.cart || [];\r\n        const cartProducts = response.data?.cartproduct || [];\r\n\r\n        const mergedCartItems = cartData.map((cartItem) => {\r\n          const product = cartProducts.find((product) => product.id === cartItem.product_id);\r\n          return product ? { ...cartItem, ...product } : null;\r\n        }).filter(Boolean);\r\n\r\n        setCartItems(mergedCartItems);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        setError(error.message);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      fetchCartData();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  return { cartItems, loading, error };\r\n};\r\n\r\nexport default useCartData;\r\n"],"mappings":"AAAA;AAEA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,WAAW,CAAIC,MAAM,EAAK,CAC9B,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGN,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACO,OAAO,CAAEC,UAAU,CAAC,CAAGR,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACS,KAAK,CAAEC,QAAQ,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAU,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,KAAAC,cAAA,CAAAC,eAAA,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAI,CAACF,KAAK,CAAE,CACV,KAAM,IAAI,CAAAG,KAAK,CAAC,wBAAwB,CAAC,CAC3C,CAEA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAhB,KAAK,CAACiB,GAAG,CAAC,uCAAuC,CAAE,CACxEC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUP,KAAK,EAChC,CACF,CAAC,CAAC,CAEF,KAAM,CAAAQ,QAAQ,CAAG,EAAAV,cAAA,CAAAM,QAAQ,CAACK,IAAI,UAAAX,cAAA,iBAAbA,cAAA,CAAeY,IAAI,GAAI,EAAE,CAC1C,KAAM,CAAAC,YAAY,CAAG,EAAAZ,eAAA,CAAAK,QAAQ,CAACK,IAAI,UAAAV,eAAA,iBAAbA,eAAA,CAAea,WAAW,GAAI,EAAE,CAErD,KAAM,CAAAC,eAAe,CAAGL,QAAQ,CAACM,GAAG,CAAEC,QAAQ,EAAK,CACjD,KAAM,CAAAC,OAAO,CAAGL,YAAY,CAACM,IAAI,CAAED,OAAO,EAAKA,OAAO,CAACE,EAAE,GAAKH,QAAQ,CAACI,UAAU,CAAC,CAClF,MAAO,CAAAH,OAAO,CAAG,CAAE,GAAGD,QAAQ,CAAE,GAAGC,OAAQ,CAAC,CAAG,IAAI,CACrD,CAAC,CAAC,CAACI,MAAM,CAACC,OAAO,CAAC,CAElB7B,YAAY,CAACqB,eAAe,CAAC,CAC7BnB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACdC,QAAQ,CAACD,KAAK,CAAC2B,OAAO,CAAC,CACvB5B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAIJ,MAAM,CAAE,CACVO,aAAa,CAAC,CAAC,CACjB,CACF,CAAC,CAAE,CAACP,MAAM,CAAC,CAAC,CAEZ,MAAO,CAAEC,SAAS,CAAEE,OAAO,CAAEE,KAAM,CAAC,CACtC,CAAC,CAED,cAAe,CAAAN,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}