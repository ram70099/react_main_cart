{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import Swal from\"sweetalert2\";import{jsx as _jsx}from\"react/jsx-runtime\";const ProductDetail=()=>{const{id,quantity}=useParams();const[product,setProduct]=useState(null);const navigate=useNavigate();const fetchProductDetails=async(id,token,quantity)=>{const url=`https://ram.freelogomaker.in/api/buynow/${id}`;try{const response=await fetch(url,{method:'POST',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify({id,quantity})// Ensure you're sending both id and quantity\n});if(!response.ok){throw new Error(\"Failed to place the order\");}return await response.json();}catch(error){throw new Error(error.message);}};useEffect(()=>{const loadProduct=async()=>{const token=localStorage.getItem('token');if(!token){Swal.fire({title:\"Unauthorized\",text:\"You must be logged in to place an order.\",icon:\"error\"});return;}try{const productData=await fetchProductDetails(id,token,quantity);setProduct(productData);if(productData.success){Swal.fire({title:\"Order Successful\",text:productData.message,icon:\"success\"});// Redirect back to the previous page after successful order\nnavigate(-1);// Go back to the previous page\n}else{Swal.fire({title:\"Order Failed\",text:productData.message||\"There was an issue placing your order.\",icon:\"error\"});}}catch(error){Swal.fire({title:\"Error\",text:error.message,icon:\"error\"});}};loadProduct();},[id,quantity,navigate]);return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid py-5\"});};export default ProductDetail;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","Swal","jsx","_jsx","ProductDetail","id","quantity","product","setProduct","navigate","fetchProductDetails","token","url","response","fetch","method","headers","body","JSON","stringify","ok","Error","json","error","message","loadProduct","localStorage","getItem","fire","title","text","icon","productData","success","className"],"sources":["C:/Users/DECENT/Desktop/react/React_shoping_cart/src/Shoping_cart/Product/Order.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst ProductDetail = () => {\r\n    const { id, quantity } = useParams();\r\n    const [product, setProduct] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    const fetchProductDetails = async (id, token, quantity) => {\r\n        const url = `https://ram.freelogomaker.in/api/buynow/${id}`;\r\n\r\n        try {\r\n            const response = await fetch(url, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ id, quantity }), // Ensure you're sending both id and quantity\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(\"Failed to place the order\");\r\n            }\r\n\r\n            return await response.json();\r\n        } catch (error) {\r\n            throw new Error(error.message);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const loadProduct = async () => {\r\n            const token = localStorage.getItem('token');\r\n            if (!token) {\r\n                Swal.fire({\r\n                    title: \"Unauthorized\",\r\n                    text: \"You must be logged in to place an order.\",\r\n                    icon: \"error\",\r\n                });\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const productData = await fetchProductDetails(id, token, quantity);\r\n                setProduct(productData);\r\n\r\n                if (productData.success) {\r\n                    Swal.fire({\r\n                        title: \"Order Successful\",\r\n                        text: productData.message,\r\n                        icon: \"success\",\r\n                    });\r\n                    // Redirect back to the previous page after successful order\r\n                    navigate(-1); // Go back to the previous page\r\n                } else {\r\n                    Swal.fire({\r\n                        title: \"Order Failed\",\r\n                        text: productData.message || \"There was an issue placing your order.\",\r\n                        icon: \"error\",\r\n                    });\r\n                }\r\n            } catch (error) {\r\n                Swal.fire({\r\n                    title: \"Error\",\r\n                    text: error.message,\r\n                    icon: \"error\",\r\n                });\r\n            }\r\n        };\r\n\r\n        loadProduct();\r\n    }, [id, quantity, navigate]);\r\n\r\n    return (\r\n        <div className=\"container-fluid py-5\">\r\n            {/* Add meaningful content or redirect handling */}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}