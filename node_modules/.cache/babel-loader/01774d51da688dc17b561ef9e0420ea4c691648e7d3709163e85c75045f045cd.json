{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ram\\\\Desktop\\\\React\\\\Projects\\\\React_shoping_cart\\\\src\\\\Shoping_cart\\\\Product\\\\AddToCart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductItem({\n  product\n}) {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const {\n    id,\n    email\n  } = useParams();\n  const navigate = useNavigate(); // Initialize useNavigate for redirection\n\n  useEffect(() => {\n    if (!id) {\n      console.error('Product ID is missing:', {\n        id\n      });\n      return;\n    }\n    console.log({\n      email,\n      id\n    });\n    const addToCart = async () => {\n      console.log('Adding to cart...');\n\n      // Retrieve the token from localStorage (or wherever you are storing it)\n      const token = localStorage.getItem('token');\n      if (!token) {\n        // If the token is not available, notify the user that they need to be logged in\n        Swal.fire({\n          title: \"Error\",\n          text: \"You need to be logged in to add items to your cart.\",\n          icon: \"error\"\n        });\n        return;\n      }\n      try {\n        const response = await axios.post(`https://ram.freelogomaker.in/api/cart/${id}`, {\n          email,\n          quantity: 1\n        }, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            // Send token in headers\n            'Content-Type': 'application/json' // Ensure proper content type\n          }\n        });\n        console.log('Response:', response);\n        if (response.data.success) {\n          setLoading(true);\n          Swal.fire({\n            title: \"Success\",\n            text: response.data.message || \"Item added to cart successfully!\",\n            icon: \"success\"\n          });\n\n          // Redirect to the shop after adding to the cart\n          navigate('/shop');\n        } else {\n          Swal.fire({\n            title: \"Error\",\n            text: response.data.message || \"Something went wrong.\",\n            icon: \"error\"\n          });\n        }\n      } catch (error) {\n        Swal.fire({\n          title: \"Error\",\n          text: error.message || \"Failed to add item to cart.\",\n          icon: \"error\"\n        });\n      }\n    };\n    addToCart();\n  }, [id, email, navigate]); // Add navigate to the dependency array\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-item\",\n    children: loading &&\n    /*#__PURE__*/\n    // You can show a loading spinner or something here if needed\n    _jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}\n_s(ProductItem, \"XAcz/Cc7SOo0UGZzzPxhQCA6NL8=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ProductItem;\nexport default ProductItem;\nvar _c;\n$RefreshReg$(_c, \"ProductItem\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","axios","Swal","jsxDEV","_jsxDEV","ProductItem","product","_s","loading","setLoading","id","email","navigate","console","error","log","addToCart","token","localStorage","getItem","fire","title","text","icon","response","post","quantity","headers","data","success","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Ram/Desktop/React/Projects/React_shoping_cart/src/Shoping_cart/Product/AddToCart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Swal from \"sweetalert2\";\r\n\r\nfunction ProductItem({ product }) {\r\n    const [loading, setLoading] = useState(false);\r\n    const { id, email } = useParams();\r\n    const navigate = useNavigate(); // Initialize useNavigate for redirection\r\n\r\n    useEffect(() => {\r\n        if (!id) {\r\n            console.error('Product ID is missing:', { id });\r\n            return;\r\n        }\r\n        console.log({ email, id });\r\n\r\n        const addToCart = async () => {\r\n            console.log('Adding to cart...');\r\n    \r\n            // Retrieve the token from localStorage (or wherever you are storing it)\r\n            const token = localStorage.getItem('token');\r\n    \r\n            if (!token) {\r\n                // If the token is not available, notify the user that they need to be logged in\r\n                Swal.fire({\r\n                    title: \"Error\",\r\n                    text: \"You need to be logged in to add items to your cart.\",\r\n                    icon: \"error\",\r\n                });\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    `https://ram.freelogomaker.in/api/cart/${id}`,\r\n                    { email, quantity: 1 },\r\n                    {\r\n                        headers: {\r\n                            'Authorization': `Bearer ${token}`, // Send token in headers\r\n                            'Content-Type': 'application/json', // Ensure proper content type\r\n                        },\r\n                    }\r\n                );\r\n                console.log('Response:', response);\r\n\r\n                if (response.data.success) {\r\n                    setLoading(true);\r\n                    Swal.fire({\r\n                        title: \"Success\",\r\n                        text: response.data.message || \"Item added to cart successfully!\",\r\n                        icon: \"success\",\r\n                    });\r\n\r\n                    // Redirect to the shop after adding to the cart\r\n                    navigate('/shop');\r\n                } else {\r\n                    Swal.fire({\r\n                        title: \"Error\",\r\n                        text: response.data.message || \"Something went wrong.\",\r\n                        icon: \"error\",\r\n                    });\r\n                }\r\n            } catch (error) {\r\n                Swal.fire({\r\n                    title: \"Error\",\r\n                    text: error.message || \"Failed to add item to cart.\",\r\n                    icon: \"error\",\r\n                });\r\n            }\r\n        };\r\n\r\n        addToCart();\r\n    }, [id, email, navigate]); // Add navigate to the dependency array\r\n\r\n    return (\r\n        <div className=\"product-item\">\r\n            {loading && (\r\n                // You can show a loading spinner or something here if needed\r\n                <div>Loading...</div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProductItem;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}